# Project Files Reference - Horizon Issue #1635

## Documentation Files

### README.md
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/README.md`

Comprehensive guide including:
- Issue overview and details
- Environment setup instructions
- Multiple methods to reproduce the issue
- Monitoring and debugging tools
- Troubleshooting guide
- Development workflow

**Start here for complete documentation.**

### QUICK-START.md
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/QUICK-START.md`

Quick reference guide:
- 30-second setup
- Available commands
- File locations
- Basic troubleshooting

**Use this for rapid setup.**

### SETUP-VERIFICATION.md
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/SETUP-VERIFICATION.md`

Detailed verification checklist:
- Project information
- Component status
- File structure
- Prerequisites verification
- Quick verification commands
- Development workflow setup

**Reference this to verify everything is working.**

### PROJECT-FILES.md
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/PROJECT-FILES.md`

This file - index of all project files and their purposes.

## Configuration Files

### .env
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/.env`

Environment configuration:
- `APP_NAME=Horizon-i1635`
- `APP_URL=https://horizon-i1635.test`
- `APP_DEBUG=true`
- `QUEUE_CONNECTION=redis`
- `CACHE_STORE=redis`
- `DB_CONNECTION=sqlite`

**Do NOT commit to version control.**

### .env.example
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/.env.example`

Template for environment configuration (generated by Laravel).

### composer.json
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/composer.json`

PHP dependencies:
- laravel/framework (10.x)
- laravel/horizon (5.36.0)
- Redis support

### composer.lock
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/composer.lock`

Locked dependency versions - ensures reproducibility.

## Application Files

### app/Jobs/TestBatchJob.php
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/app/Jobs/TestBatchJob.php`

Test job implementation:
```php
- Implements ShouldQueue interface
- Accepts job ID parameter
- Simulates work with 1-3 second sleep
- Logs job completion
```

Used by batch submission commands to create test jobs.

### app/Console/Commands/BatchTestCommand.php
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/app/Console/Commands/BatchTestCommand.php`

Artisan command for batch submission:
```bash
php artisan batch:test [options]
```

Options:
- `--batches=N` (default: 8)
- `--jobs=N` (default: 100)

Features:
- Submits multiple batches simultaneously
- Each batch contains specified number of jobs
- Outputs batch IDs for tracking
- Reproduces the "stuck pending" issue

### routes/web.php
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/routes/web.php`

HTTP endpoints for testing:
- `GET /` - Welcome page
- `GET /test/batch` - Submit batches via HTTP
  - Query params: `?batches=8&jobs=100`
- `GET /test/status` - Check batch status

## Configuration Files

### config/horizon.php
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/config/horizon.php`

Horizon configuration:
- Worker settings
- Queue monitoring
- Retry policies
- Supervisors configuration

Auto-generated by Horizon installation.

### config/queue.php
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/config/queue.php`

Queue driver configuration:
- Default queue: redis
- Connections: redis, database, etc.
- Batching support enabled

### config/database.php
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/config/database.php`

Database configuration:
- Default connection: sqlite
- SQLite path: database/database.sqlite
- MySQL credentials available (commented)

## Database Files

### database/database.sqlite
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/database/sqlite`

SQLite database file:
- Auto-created on first migration
- Contains all application tables
- Tables: users, jobs, job_batches, sessions, etc.

## Development Files

### project.code-workspace
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/project.code-workspace`

VSCode workspace configuration:
```json
{
  "folders": [
    { "path": "." },
    { "path": "../packages/horizon" }
  ]
}
```

Opens the project and local Horizon package for development.

### test-batch.sh
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/test-batch.sh`

Interactive test script (executable):

Menu options:
1. Submit 8 batches with 100 jobs each
2. Submit custom batches
3. Check batch status
4. View database records
5. Clear all batches
6. Start Horizon worker
7. Open Horizon dashboard
8. View recent logs
9. Exit

Usage:
```bash
./test-batch.sh
```

## Logs and Runtime Files

### storage/logs/laravel.log
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/storage/logs/laravel.log`

Application logs:
- Job execution logs
- Errors and exceptions
- Debug information

Monitor in real-time:
```bash
tail -f storage/logs/laravel.log
```

### storage/app/
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/storage/app/`

Application storage directory for files.

### storage/framework/
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/storage/framework/`

Framework cache and runtime files.

## Testing Files

### tests/
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/tests/`

Directory for automated tests (empty for this issue reproduction).

### phpunit.xml
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/phpunit.xml`

PHPUnit configuration for automated testing.

## Build Files

### public/
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/public/`

Web server root:
- index.php
- .htaccess (for Apache)
- css/, js/ (for assets)

### resources/
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/resources/`

View templates and assets:
- views/welcome.blade.php
- css/, js/ (source files)

### vite.config.js
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/vite.config.js`

Vite build configuration for asset bundling.

## Other Important Files

### artisan
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/artisan`

Laravel Artisan CLI entry point (executable).

### .gitignore
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/.gitignore`

Git ignore patterns (standard Laravel).

### .editorconfig
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/.editorconfig`

Editor configuration for consistent coding style.

### package.json
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/package.json`

NPM dependencies for frontend assets.

### package-lock.json
**Location:** `/Users/nckrtl/Projects/laravel-issues/horizon-i1635/package-lock.json`

Locked NPM dependencies.

## Related External Resources

### Local Horizon Package
**Location:** `/Users/nckrtl/Projects/laravel-issues/packages/horizon`

Full Horizon source code for testing fixes:
- src/ - Source code
- config/ - Configuration files
- tests/ - Tests
- composer.json - Package metadata

This package is symlinked into the Laravel project for development.

### Parent Directory
**Location:** `/Users/nckrtl/Projects/laravel-issues/`

Contains all issue reproduction projects:
- horizon-i1635/ (current)
- horizon-i1539/ (other issue)
- packages/ (local packages)

## Quick File Access

| Need | File | Location |
|------|------|----------|
| Quick setup | QUICK-START.md | `/horizon-i1635/QUICK-START.md` |
| Full guide | README.md | `/horizon-i1635/README.md` |
| Verification | SETUP-VERIFICATION.md | `/horizon-i1635/SETUP-VERIFICATION.md` |
| Edit config | .env | `/horizon-i1635/.env` |
| Create jobs | app/Jobs/TestBatchJob.php | `/horizon-i1635/app/Jobs/TestBatchJob.php` |
| Batch command | BatchTestCommand.php | `/horizon-i1635/app/Console/Commands/` |
| HTTP endpoints | routes/web.php | `/horizon-i1635/routes/web.php` |
| Test script | test-batch.sh | `/horizon-i1635/test-batch.sh` |
| VSCode setup | project.code-workspace | `/horizon-i1635/project.code-workspace` |
| Database | database.sqlite | `/horizon-i1635/database/database.sqlite` |
| Logs | laravel.log | `/horizon-i1635/storage/logs/laravel.log` |
| Horizon code | horizon | `/packages/horizon` |

## Notes

- All configuration is pre-set and ready to use
- The environment uses SQLite for easy setup without external DB
- MySQL configuration available in .env (commented out)
- Local Horizon package allows testing fixes
- All files follow Laravel conventions
- Production-ready configuration can be enabled as needed

## Getting Started

1. Read **QUICK-START.md** for immediate setup
2. Refer to **README.md** for detailed documentation
3. Check **SETUP-VERIFICATION.md** to verify everything
4. Use **test-batch.sh** or **batch:test** command to reproduce
5. Monitor **storage/logs/laravel.log** for debugging
6. Edit files in **app/** and **routes/** to customize testing
